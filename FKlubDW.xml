<?xml version="1.0"?>
<Schema name="FKlubDW">

  <Dimension name="Product" foreignKey="product_id">
    <Hierarchy hasAll="true" primaryKey="product_id">
      <Table name="product"/>
      <Level name="name" column="name" uniqueMembers="true">
        <Property name="Price" column="price" type="Numeric"/>
        <Property name="Is Active" column="is_active" type="Boolean"/>
        <Property name="Deactivation Date" column="deactivation_date" type="Date"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Member" foreignKey="member_id">
    <Hierarchy hasAll="true" primaryKey="member_id">
      <Table name="member"/>
      <Level name="Individual" column="member_id" uniqueMembers="true">
        <Property name="Balance" column="balance" type="Numeric"/>
        <Property name="Is Active" column="is_active" type="Boolean"/>
        <Property name="Year of Enrollment" column="year" type="Integer"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Room" foreignKey="room_id">
    <Hierarchy hasAll="true" primaryKey="room_id">
      <Table name="room"/>
      <Level name="Name" column="name" uniqueMembers="true">
        <Property name="Description" column="description" type="String"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Time" foreignKey="time_id" type="TimeDimension">
    <Hierarchy hasAll="true" primaryKey="time_id">
      <Table name="time"/>
      <Level name="Semester" column="semester" uniqueMembers="true">
        <Property name="Is Spring" column="is_spring" type="Boolean"/>
        <Property name="Year" column="year" type="Integer"/>
      </Level>
      <Level name="Week" column="week" uniqueMembers="false"/>
      <Level name="Day" column="day" uniqueMembers="false">
        <Property name="Is Weekend" column="is_weekend" type="Boolean"/>
        <Property name="Is Holiday" column="is_holiday" type="Boolean"/>
      </Level>
      <Level name="Hour" column="hour" uniqueMembers="false">
        <Property name="Is Morning" column="is_morning" type="Boolean"/>
        <Property name="Is Afternoon" column="is_afternoon" type="Boolean"/>
      </Level>
      <Level name="Quarter of Hour" column="quarter_hour" uniqueMembers="false">
        <Property name="Event: FLAN" column="event_flan" type="Boolean"/>
      </Level>
    </Hierarchy>
  </Dimension>


<Cube name="Sales" defaultMeasure="Total Sales">
  <Table name="sale"/>
  <DimensionUsage name="Room"    source="Room"    foreignKey="room_id"/>
  <DimensionUsage name="Product" source="Product" foreignKey="product_id"/>
  <DimensionUsage name="Time"    source="Time"    foreignKey="time_id"/>
  <DimensionUsage name="Member"  source="Member"  foreignKey="member_id"/>

  <Measure name="Total Sales" column="price" aggregator="sum" formatString="#,###.00"/>
</Cube>

</Schema>
